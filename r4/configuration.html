<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/markdown/configuration.md at 2025-12-10
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>‚öôÔ∏è Configuration ‚Äì FHIR Dosage Support - R4</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.1.0.min.js"></script>
<meta name="keywords" content="config, configuration, setup" /><meta name="description" content="How to customize the library?" />  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="https://github.com/jy95/fds">FHIR Dosage Support - R4</a></h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-12-10<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.1.6-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">üó∫Ô∏è Overview</li>
    <li><a href="getting-started.html">‚ö° Getting started</a></li>
    <li class="active"><a>üîé Configuration</a></li>
   <li class="nav-header">üí° Examples</li>
    <li><a href="specifications.html">üîé Specifications</a></li>
    <li><a href="timing/timing.html">‚åö Timing</a></li>
    <li><a href="medicationrequest.html">üåå MedicationRequest</a></li>
   <li class="nav-header">üìñ Reference</li>
    <li><a href="faq.html">‚ùì FAQ</a></li>
    <li><a href="roadmap.html">üöß Roadmap</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
   <li class="nav-header">Parent Project</li>
    <li><a href="../index.html">FHIR Dosage Support</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="a.E2.9A.99.EF.B8.8F_Configuration"></a>
<h1>&#x2699;&#xfe0f; Configuration</h1>
<ul id="toc">
<li><a href="#fromCodeableConceptToString">fromCodeableConceptToString</a></li>
<li><a href="#fromExtensionsToString">fromExtensionsToString</a></li>
<li><a href="#fromFHIRQuantityUnitToString">fromFHIRQuantityUnitToString</a></li>
<li><a href="#selectDosageAndRateField">selectDosageAndRateField</a></li>
<li><a href="#hasMatchingComponent">hasMatchingComponent</a></li></ul>

<p>This page provides details on configuring the library with <a href="./apidocs/io/github/jy95/fds/r4/config/FDSConfigR4.html"><code>FDSConfigR4</code></a> class.
Remember to check the <a href="../common/configuration.html">Configuration page of the common module</a> as well.</p><section><a id="fromCodeableConceptToString"></a>
<h2>fromCodeableConceptToString</h2>
<p>Converts a FHIR <code>CodeableConcept</code> to a string representation.</p><section><a id="Why_this_method_exists"></a>
<h3>Why this method exists</h3>
<p>The default CodeableConcept representation can be verbose.
This method extracts key information (e.g., code, display) to make it more human-readable and useful.</p></section><section><a id="Example_Usage"></a>
<h3>Example Usage</h3>

<pre class="prettyprint"><code class="language-java">import io.github.jy95.fds.r4.config.FDSConfigR4;

import org.hl7.fhir.r4.model.CodeableConcept;
import org.hl7.fhir.r4.model.Coding;

import java.util.concurrent.CompletableFuture;

public class Main {
    public static void main(String[] args) {
        // Sample
        CodeableConcept concept = new CodeableConcept();
        concept.setText(&quot;Example concept&quot;);
        concept.addCoding(new Coding().setCode(&quot;1234&quot;).setDisplay(&quot;Example display&quot;));

        // Create a configuration to be used by the library
        var config = FDSConfigR4
                .builder()
                .fromCodeableConceptToString(
                        // TODO Your custom &quot;fromCodeableConceptToString&quot; logic here
                        // Including potential call(s) to your terminology server to turn code(s) to text
                        c -&gt; CompletableFuture.completedFuture(c.getCodingFirstRep().getCode() + &quot; - &quot; + c.getCodingFirstRep().getDisplay())
                ).build();

        // To test the function in action
        String result = config.fromCodeableConceptToString(concept).get();
        System.out.println(result);
    }
}
</code></pre></section></section><section><a id="fromExtensionsToString"></a>
<h2>fromExtensionsToString</h2>
<p>Converts a list of FHIR Extension objects to a string representation.</p><section><a id="Why_this_method_exists_1"></a>
<h3>Why this method exists</h3>
<p>FHIR extensions are designed to store extra information, but they can contain pretty much anything possible in FHIR.<br />
This method empowers users to :</p>
<ul>

<li>Select the extension(s) they would like to display</li>
<li>Customize each extension rendering to their liking or/and their specifications</li>
<li>Order the rendering of existing extension(s) in case of precedence rule(s) (e.g., Extension B before Extension A)</li>
</ul></section><section><a id="Example_Usage_1"></a>
<h3>Example Usage</h3>

<pre class="prettyprint"><code class="language-java">import io.github.jy95.fds.r4.config.FDSConfigR4;
import org.hl7.fhir.r4.model.Extension;
import org.hl7.fhir.r4.model.StringType;

import java.util.List;
import java.util.ArrayList;
import java.util.stream.Collectors;
import java.util.concurrent.CompletableFuture;

public class Main {
    public static void main(String[] args) {
        // Sample
        List&lt;Extension&gt; extensions = new ArrayList&lt;&gt;();
        extensions.add(new Extension(&quot;url1&quot;, new StringType(&quot;value1&quot;)));
        extensions.add(new Extension(&quot;url2&quot;, new StringType(&quot;value2&quot;)));

        // Create a configuration to be used by the library
        var config = FDSConfigR4
                .builder()
                .fromExtensionsToString(
                        // TODO Your custom &quot;fromExtensionsToString&quot; logic here
                        // Including potential async processing for each extension
                        exts -&gt; CompletableFuture.completedFuture(
                                exts
                                        .stream()
                                        .map(ext -&gt; ext.getUrl() + &quot;: &quot; + ext.getValue().primitiveValue())
                                        .collect(Collectors.joining(&quot;, &quot;, &quot;{&quot;, &quot;}&quot;))
                        )
                ).build();

        // To test the function in action
        String result = config.fromExtensionsToString(extensions).get();
        System.out.println(result);
    }
}
</code></pre></section></section><section><a id="fromFHIRQuantityUnitToString"></a>
<h2>fromFHIRQuantityUnitToString</h2>
<p>Converts a FHIR Quantity object to a string representation of its unit or code.</p><section><a id="Why_this_method_exists_2"></a>
<h3>Why this method exists</h3>
<p>By default, FHIR <code>Quantity</code> object isn't bound to a single Code System (e.g., UCUM, SNOMED-CT, &#x2026;) or not (e.g., raw units).
This method extracts only the unit regardless of its format, ensuring consistent and compact formatting, which is critical for displaying units in UI or reports.</p></section><section><a id="Example_Usage_2"></a>
<h3>Example Usage</h3>

<pre class="prettyprint"><code class="language-java">import io.github.jy95.fds.r4.config.FDSConfigR4;
import org.hl7.fhir.r4.model.Quantity;

import java.util.concurrent.CompletableFuture;

public class Main {
    public static void main(String[] args) {
        // Sample
        Quantity quantity = new Quantity()
                .setValue(3)
                .setCode(&quot;theCode&quot;)
                .setSystem(&quot;MySuperSystem&quot;);

        // Create a configuration to be used by the library
        var config = FDSConfigR4
                .builder()
                .fromFHIRQuantityUnitToString(
                        // TODO Your custom &quot;fromFHIRQuantityUnitToString&quot; logic here
                        // Including potential call(s) to your terminology server to turn code(s) to text 
                        q -&gt; CompletableFuture.completedFuture(q.getCode() + &quot; (&quot; + q.getSystem() + &quot;)&quot;)
                ).build();

        // To test the function in action
        String result = config.fromFHIRQuantityUnitToString(quantity).get();
        System.out.println(result);
    }
}
</code></pre></section></section><section><a id="selectDosageAndRateField"></a>
<h2>selectDosageAndRateField</h2>
<p>Select a specific dosage and rate field from a list of Dosage.DosageDoseAndRateComponent.</p><section><a id="Why_this_method_exists_3"></a>
<h3>Why this method exists</h3>
<p>The FHIR definition of doseAndRate field is flexible, to support both ordered quantity by human or computed quantity by something else.
This method provides a standardized way to extract the relevant field for a specific use case, improving data clarity and reducing processing complexity.</p></section><section><a id="Example_Usage_3"></a>
<h3>Example Usage</h3>

<pre class="prettyprint"><code class="language-java">import io.github.jy95.fds.common.types.DoseAndRateKey;
import io.github.jy95.fds.r4.config.FDSConfigR4;
import io.github.jy95.fds.common.types.DoseAndRateExtractor;
import org.hl7.fhir.r4.model.*;

import java.util.List;
import java.util.ArrayList;

public class Main {
    public static void main(String[] args) {
        // Sample
        List&lt;Dosage.DosageDoseAndRateComponent&gt; components = new ArrayList&lt;&gt;();
        components.add(new Dosage.DosageDoseAndRateComponent().setDoseQuantity(new Quantity().setValue(10)));
        
        // Create a configuration to be used by the library
        var config = FDSConfigR4
                .builder()
                .selectDosageAndRateField(
                        (doseAndRateComponentList, doseAndRateKey) -&gt; {
                            // TODO Your custom &quot;selectDosageAndRateField&quot; logic here
                            // Here is the default implementation in the library
                            DoseAndRateExtractor&lt;Dosage.DosageDoseAndRateComponent, Type&gt; doseAndRateExtractor = switch (doseAndRateKey) {
                                case DOSE_QUANTITY -&gt; Dosage.DosageDoseAndRateComponent::getDoseQuantity;
                                case DOSE_RANGE -&gt; Dosage.DosageDoseAndRateComponent::getDoseRange;
                                case RATE_QUANTITY -&gt; Dosage.DosageDoseAndRateComponent::getRateQuantity;
                                case RATE_RANGE -&gt; Dosage.DosageDoseAndRateComponent::getRateRange;
                                case RATE_RATIO -&gt; Dosage.DosageDoseAndRateComponent::getRateRatio;
                            };
                            var firstRep = doseAndRateComponentList.get(0);
                            return doseAndRateExtractor.extract(firstRep);
                        }
                ).build();

        // To test the function in action
        var doseAndRateKey = DoseAndRateKey.DOSE_QUANTITY;
        var result = config.selectDosageAndRateField(components, doseAndRateKey);
        System.out.println(result);
    }
}
</code></pre></section></section><section><a id="hasMatchingComponent"></a>
<h2>hasMatchingComponent</h2>
<p>Check if a Dosage has any component matching a given predicate.</p><section><a id="Why_this_method_exists_4"></a>
<h3>Why this method exists</h3>
<p>FHIR dosage components often require custom validation or filtering based on specific criteria.
This method allows for flexible checks to ensure the dosage meets your application's specific requirements, for instance :</p>
<ul>

<li>Take ordered quantity by human only</li>
<li>Take computed quantity by something else only</li>
</ul></section><section><a id="Example_Usage_4"></a>
<h3>Example Usage</h3>

<pre class="prettyprint"><code class="language-java">import io.github.jy95.fds.r4.config.FDSConfigR4;
import org.hl7.fhir.r4.model.Dosage;
import org.hl7.fhir.r4.model.Quantity;

import java.util.function.Predicate;

public class Main {
    public static void main(String[] args) {
        // Sample
        Dosage dosage = new Dosage();
        dosage.addDoseAndRate(new Dosage.DosageDoseAndRateComponent().setDoseQuantity(new Quantity().setValue(5)));

        // Create a configuration to be used by the library
        var config = FDSConfigR4
                .builder()
                .hasMatchingComponent(
                        // TODO Your custom &quot;hasMatchingComponent&quot; logic here
                        // Here is the default implementation in the library
                        (d, predicate) -&gt; d.hasDoseAndRate() &amp;&amp; d.getDoseAndRate().stream().anyMatch(predicate)
                ).build();

        // To test the function in action
        boolean result = config.hasMatchingComponent(dosage);
        System.out.println(result);
    }
}
</code></pre></section></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>¬©      2025
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
